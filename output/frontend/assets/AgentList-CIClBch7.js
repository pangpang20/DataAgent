import{d as G,a as K,v as R,e as j,c as q,g as W,o as H,p as J,r as O,s as Q,b as k,f as w,E as $,u as X,h as Y,_ as Z,i as F,w as n,j as l,k as p,l as e,m as A,n as z,t as d,q as a,x as g,F as x,y as ee,z as te}from"./index-DNCKiXbb.js";import{B as se}from"./BaseLayout-bdnKF8nQ.js";import{g as oe,A as I,a as ae}from"./avatar-DDGUTKZC.js";const ne=G({name:"AgentList",components:{BaseLayout:se,Grid:W,Check:q,Edit:j,VideoPause:R,Delete:K},setup(){const s=X(),o=w(!0),m=w("all"),h=w(""),u=w([]),D=k(()=>u.value.filter(t=>t.status==="published").length),y=k(()=>u.value.filter(t=>t.status==="draft").length),c=k(()=>u.value.filter(t=>t.status==="offline").length),f=k(()=>{let t=u.value;if(m.value!=="all"&&(t=t.filter(r=>r.status===m.value)),h.value.trim()){const r=h.value.toLowerCase();t=t.filter(_=>_.name.toLowerCase().includes(r)||_.description.toLowerCase().includes(r)||_.id.toString().includes(r))}return t}),T=t=>{m.value=t},b=async()=>{o.value=!0;try{const t=await I.list();u.value=t||[]}catch{$.error("获取智能体列表失败，请检查网络！"),u.value=[]}finally{o.value=!1}},V=t=>{s.push(`/agent/${t}`)},B=t=>({published:"已发布",draft:"草稿",offline:"已下线"})[t]||t,E=t=>({published:"success",draft:"warning",offline:"info"})[t]||"info",v=t=>t?t.replace(/\//g,"/"):"",C=()=>{s.push("/agent/create")},L=t=>{console.error("头像图片加载失败:",t.name),(!t.avatar||t.avatar.startsWith("data:"))&&(t.avatar=ae())},S=async t=>{try{await Y.confirm(`确定要删除智能体 "${t.name}" 吗？此操作不可恢复。`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),await I.delete(t.id)?($.success("智能体删除成功"),u.value=u.value.filter(_=>_.id!==t.id)):$.error("智能体删除失败")}catch{console.log("删除操作已取消")}};return H(()=>{b()}),{loading:o,activeFilter:m,searchKeyword:h,agents:u,filteredAgents:f,publishedCount:D,draftCount:y,offlineCount:c,setFilter:T,loadAgents:b,enterAgent:V,getStatusText:B,getStatusTagType:E,formatTime:v,goToCreateAgent:C,handleDeleteAgent:S,handleImageError:L,getAvatarUrl:oe,Search:Q,Refresh:O,Plus:J}}}),le={class:"agent-list-page"},ie={class:"main-content"},de={class:"content-header"},re={class:"header-stats"},ue={class:"stat-item"},ce={class:"stat-number"},_e={class:"stat-item"},fe={class:"stat-number"},pe={class:"stat-item"},me={class:"stat-number"},ve={class:"stat-item"},ge={class:"stat-number"},he={class:"filter-section"},ye={class:"filter-content"},be={class:"filter-tabs-row"},Ce={class:"filter-tabs"},ke={class:"tab-count"},we={class:"tab-count"},Ae={class:"tab-count"},Te={class:"tab-count"},Ve={class:"search-and-actions"},Be={class:"action-buttons"},Ee={key:0,class:"agents-grid"},Le={class:"agent-content"},Se=["onClick"],$e={class:"agent-avatar"},ze={class:"agent-info"},De={class:"agent-name"},Me={class:"agent-description"},Fe={class:"agent-meta"},Ie={class:"agent-id"},Pe={class:"agent-time"},Ne={class:"agent-status"},Ue={key:1,class:"loading-state"},Ge={key:2,class:"empty-state"};function Ke(s,o,m,h,u,D){const y=l("Grid"),c=l("el-icon"),f=l("el-radio-button"),T=l("Check"),b=l("Edit"),V=l("VideoPause"),B=l("el-radio-group"),E=l("el-input"),v=l("el-button"),C=l("el-card"),L=l("Delete"),S=l("el-avatar"),t=l("el-tag"),r=l("el-col"),_=l("el-row"),P=l("el-skeleton"),N=l("el-empty"),U=l("BaseLayout");return p(),F(U,null,{default:n(()=>[e("div",le,[e("main",ie,[e("div",de,[o[6]||(o[6]=e("div",{class:"header-info"},[e("h1",{class:"content-title"},"智能体管理中心"),e("p",{class:"content-subtitle"},"创建和管理您的AI智能体，让数据分析更智能")],-1)),e("div",re,[e("div",ue,[e("div",ce,d(s.agents.length),1),o[2]||(o[2]=e("div",{class:"stat-label"},"总数量",-1))]),e("div",_e,[e("div",fe,d(s.publishedCount),1),o[3]||(o[3]=e("div",{class:"stat-label"},"已发布",-1))]),e("div",pe,[e("div",me,d(s.draftCount),1),o[4]||(o[4]=e("div",{class:"stat-label"},"草稿",-1))]),e("div",ve,[e("div",ge,d(s.offlineCount),1),o[5]||(o[5]=e("div",{class:"stat-label"},"已下线",-1))])])]),e("div",he,[a(C,null,{default:n(()=>[e("div",ye,[e("div",be,[e("div",Ce,[a(B,{modelValue:s.activeFilter,"onUpdate:modelValue":o[0]||(o[0]=i=>s.activeFilter=i),size:"large"},{default:n(()=>[a(f,{value:"all"},{default:n(()=>[a(c,null,{default:n(()=>[a(y)]),_:1}),o[7]||(o[7]=e("span",null,"全部智能体",-1)),e("span",ke,d(s.agents.length),1)]),_:1}),a(f,{value:"published"},{default:n(()=>[a(c,null,{default:n(()=>[a(T)]),_:1}),o[8]||(o[8]=e("span",null,"已发布",-1)),e("span",we,d(s.publishedCount),1)]),_:1}),a(f,{value:"draft"},{default:n(()=>[a(c,null,{default:n(()=>[a(b)]),_:1}),o[9]||(o[9]=e("span",null,"草稿",-1)),e("span",Ae,d(s.draftCount),1)]),_:1}),a(f,{value:"offline"},{default:n(()=>[a(c,null,{default:n(()=>[a(V)]),_:1}),o[10]||(o[10]=e("span",null,"已下线",-1)),e("span",Te,d(s.offlineCount),1)]),_:1})]),_:1},8,["modelValue"])]),e("div",Ve,[a(E,{modelValue:s.searchKeyword,"onUpdate:modelValue":o[1]||(o[1]=i=>s.searchKeyword=i),placeholder:"搜索智能体名称、ID或描述...",size:"large","prefix-icon":s.Search,clearable:"",style:{width:"350px"}},null,8,["modelValue","prefix-icon"]),e("div",Be,[a(v,{icon:s.Refresh,onClick:s.loadAgents,size:"large"},{default:n(()=>[...o[11]||(o[11]=[g("刷新",-1)])]),_:1},8,["icon","onClick"]),a(v,{type:"primary",icon:s.Plus,onClick:s.goToCreateAgent,size:"large"},{default:n(()=>[...o[12]||(o[12]=[g(" 创建智能体 ",-1)])]),_:1},8,["icon","onClick"])])])])])]),_:1})]),s.loading?z("",!0):(p(),A("div",Ee,[a(_,{gutter:20},{default:n(()=>[(p(!0),A(x,null,ee(s.filteredAgents,i=>(p(),F(r,{key:i.id,xs:24,sm:12,md:8,lg:6},{default:n(()=>[a(C,{class:"agent-card","body-style":{padding:"20px"},onClick:M=>s.enterAgent(i.id)},{default:n(()=>[e("div",Le,[e("div",{class:"delete-button",onClick:te(M=>s.handleDeleteAgent(i),["stop"])},[a(c,null,{default:n(()=>[a(L)]),_:1})],8,Se),e("div",$e,[a(S,{size:48,src:s.getAvatarUrl(i.avatar),onError:M=>s.handleImageError(i)},{default:n(()=>[g(d(i.name),1)]),_:2},1032,["src","onError"])]),e("div",ze,[e("h3",De,d(i.name),1),e("p",Me,d(i.description),1),e("div",Fe,[e("span",Ie,"ID: "+d(i.id),1),e("span",Pe,d(s.formatTime(i.updateTime)),1)])]),e("div",Ne,[a(t,{type:s.getStatusTagType(i.status),size:"small",effect:"light"},{default:n(()=>[g(d(s.getStatusText(i.status)),1)]),_:2},1032,["type"])])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])),s.loading?(p(),A("div",Ue,[a(P,{rows:6,animated:""})])):z("",!0),!s.loading&&s.filteredAgents.length===0?(p(),A("div",Ge,[a(N,{description:"暂无智能体"},{image:n(()=>[a(c,{size:"60"},{default:n(()=>[a(y)]),_:1})]),default:n(()=>[a(v,{type:"primary",icon:s.Plus,onClick:s.goToCreateAgent},{default:n(()=>[...o[13]||(o[13]=[g("创建智能体",-1)])]),_:1},8,["icon","onClick"])]),_:1})])):z("",!0)])])]),_:1})}const We=Z(ne,[["render",Ke],["__scopeId","data-v-25f2aae0"]]);export{We as default};
